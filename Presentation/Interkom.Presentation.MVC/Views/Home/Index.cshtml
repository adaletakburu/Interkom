@{
    ViewData["Title"] = "Home Page";
}

<style>
    /* Butonların stili için örnek */
    .station-button {
        margin: 5px;
        padding: 10px;
        background-color: #007BFF;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

        .station-button:hover {
            background-color: #0056b3;
        }
</style>

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://learn.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>

<div id="stationButtons"></div>

<script>
    const connection = new signalR.HubConnectionBuilder().withUrl("/zenitelHub").build();

    connection.start().then(() => {
        console.log("zenitelHub bağlanıldı.");
    }).catch(err => console.error("SignalR bağlantı hatası:", err));


    // Peer listesi güncellendiğinde listede göster
    connection.on("GetFullIPStationOKList", (stationList) => {

        const container = document.getElementById("stationButtons");
        container.innerHTML = ""; // Eski butonları temizle

        stationList.forEach((station) => {
            const button = document.createElement("button");
            button.innerText = station.displayText; // Görünen metin
            button.className = "station-button"; // İstersen CSS için bir sınıf ekle
            button.addEventListener("click", () => {
                // Butona tıklandığında bir işlem yap
                console.log(`${station.displayText} butonuna tıklandı!`);
            });

            container.appendChild(button);
        });
        /*
        stationList.forEach((station) => {
            //station.directoryNumber.digitString
            //station.physicalNumber
            //station.displayText
            console.log(station.displayText);
        });*/

    });

</script>